{% extends "base.html" %}

{% block title %}Query{% endblock %}

{% block content %}
    <div class="container">   
        <div class="row">
            <div class="col-md-3 sidebar">
                <div class="panel panel-default" >
                    <div class="panel-heading">
                        <h3 class="panel-title">Query language:</h3>
                    </div>    
                    <div class="panel-body">
                        <p>Elements:</br>
                        <p>Conditions:</br>
                    </div>
                </div>
            </div>      
            {% if test %}
                TEST!! Form submitted!
            {% endif %}

            {% if result_table %}
            <div class="col-md-7 content">
                TEST!! Form submitted!
                <h2><i class="fa fa-trophy"></i> Results:</h2>
                {% for row in result_table %}
                <table>
                    {{ row }}
                </table>
                {% endfor %}
            </div>
            <div class="col-md-9 content">
                <h2><i class="fa fa-cloud"></i> Please enter another query: </h2>
                <form id="query_form" method="post" action="//">
                    {% csrf_token %}
                    {% for hidden in form.hidden_fields %}
                        {{ hidden }}
                    {% endfor %}

                    {% for field in form.visible_fields %}
                        {{ field.errors }}
                        {{ field.help_text}}
                        {{ field }}
                    {% endfor %}
                    <input type="submit" name="submit" value="Submit Query" />
                </form>
            </div>
            {% else %}
            <div class="col-md-9 content">
                <h2><i class="fa fa-cloud"></i> Please enter query: </h2>
                <form id="query_form" method="post" action="">
                    {% csrf_token %}
                    {% for hidden in form.hidden_fields %}
                        {{ hidden }}
                    {% endfor %}

                    {{ form.as_p }}
                    <input type="submit" name="submit" value="Submit Query" />
                </form>
            </div>
            {% endif %}
        </div>
    </div>
{% endblock %}

